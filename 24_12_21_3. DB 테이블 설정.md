
## 1. DB 테이블, 시퀀스

```sql
-- USER 테이블 생성
CREATE TABLE USERS (
    USER_ID NUMBER PRIMARY KEY,
    USERNAME VARCHAR2(50) NOT NULL UNIQUE,
    PASSWORD VARCHAR2(100) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    PROFILE_IMAGE VARCHAR2(200),
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- GAME 테이블 생성
CREATE TABLE GAMES (
    GAME_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(100) NOT NULL,
    DESCRIPTION CLOB,
    PRICE NUMBER(10,2) NOT NULL,
    GAME_IMAGE VARCHAR2(200),
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- PURCHASES 테이블 생성
CREATE TABLE PURCHASES (
    PURCHASE_ID NUMBER PRIMARY KEY,
    USER_ID NUMBER NOT NULL,
    GAME_ID NUMBER NOT NULL,
    PURCHASED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_PURCHASES_USER FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    CONSTRAINT FK_PURCHASES_GAME FOREIGN KEY (GAME_ID) REFERENCES GAMES(GAME_ID)
);

-- LIBRARY 테이블 생성
CREATE TABLE LIBRARY (
    LIBRARY_ID NUMBER PRIMARY KEY,
    USER_ID NUMBER NOT NULL,
    GAME_ID NUMBER NOT NULL,
    LAST_PLAYED TIMESTAMP,
    CONSTRAINT FK_LIBRARY_USER FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    CONSTRAINT FK_LIBRARY_GAME FOREIGN KEY (GAME_ID) REFERENCES GAMES(GAME_ID)
);

-- REVIEWS 테이블 생성
CREATE TABLE REVIEWS (
    REVIEW_ID NUMBER PRIMARY KEY,
    USER_ID NUMBER NOT NULL,
    GAME_ID NUMBER NOT NULL,
    RATING NUMBER(2,1) CHECK (RATING >= 0 AND RATING <= 5),
    REVIEW_COMMENT CLOB,  
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    CONSTRAINT FK_REVIEWS_USER FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    CONSTRAINT FK_REVIEWS_GAME FOREIGN KEY (GAME_ID) REFERENCES GAMES(GAME_ID)
);

-- 시퀀스 생성 (각 테이블의 ID 자동 증가를 위해)
CREATE SEQUENCE SEQ_USER_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_GAME_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_PURCHASE_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_LIBRARY_ID START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_REVIEW_ID START WITH 1 INCREMENT BY 1;

```
-----

## 2. 데이터 초기화

```sql
-- 테이블 삭제
BEGIN
    FOR rec IN (SELECT table_name FROM user_tables) LOOP
        EXECUTE IMMEDIATE 'DROP TABLE ' || rec.table_name || ' CASCADE CONSTRAINTS';
    END LOOP;
END;
/

-- 시퀀스 삭제
BEGIN
    FOR rec IN (SELECT sequence_name FROM user_sequences) LOOP
        EXECUTE IMMEDIATE 'DROP SEQUENCE ' || rec.sequence_name;
    END LOOP;
END;
/

-- 트리거 삭제
BEGIN
    FOR rec IN (SELECT trigger_name FROM user_triggers) LOOP
        EXECUTE IMMEDIATE 'DROP TRIGGER ' || rec.trigger_name;
    END LOOP;
END;
/

-- 뷰 삭제
BEGIN
    FOR rec IN (SELECT view_name FROM user_views) LOOP
        EXECUTE IMMEDIATE 'DROP VIEW ' || rec.view_name;
    END LOOP;
END;
/
```